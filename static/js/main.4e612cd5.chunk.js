(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,a){e.exports=a(90)},48:function(e,t,a){},87:function(e,t){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(39),s=a.n(o),i=(a(48),a(17)),c=a(1),l=a.n(c),m=a(7),u=a(2),p=a(3),h=a(5),y=a(4),d=a(6),f=a(16),v=a.n(f),g=a(40),b=function(){function e(t){var a=t.server,n=t.gameComponents,r=t.playerName,o=t.playerCredentials;Object(u.a)(this,e),this.gameComponents=n,this.playerName=r||"Visitor",this.playerCredentials=o,this.server=a,this.gameInstances=[]}return Object(p.a)(e,[{key:"_baseUrl",value:function(){return"".concat(this.server||"","/games")}},{key:"refresh",value:function(){var e=Object(m.a)(l.a.mark(function e(){var t,a,n,r,o,s,i,c,m,u,p,h,y,d,f;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.gameInstances.length=0,e.next=4,fetch(this._baseUrl());case 4:if(200===(t=e.sent).status){e.next=7;break}throw new Error("HTTP status "+t.status);case 7:return e.next=9,t.json();case 9:a=e.sent,n=!0,r=!1,o=void 0,e.prev=13,s=a[Symbol.iterator]();case 15:if(n=(i=s.next()).done){e.next=48;break}if(c=i.value,this._getGameComponents(c)){e.next=19;break}return e.abrupt("continue",45);case 19:return e.next=21,fetch(this._baseUrl()+"/"+c);case 21:return m=e.sent,e.next=24,m.json();case 24:for(u=e.sent,p=!0,h=!1,y=void 0,e.prev=28,d=u.gameInstances[Symbol.iterator]();!(p=(f=d.next()).done);p=!0)f.value.gameName=c;e.next=36;break;case 32:e.prev=32,e.t0=e.catch(28),h=!0,y=e.t0;case 36:e.prev=36,e.prev=37,p||null==d.return||d.return();case 39:if(e.prev=39,!h){e.next=42;break}throw y;case 42:return e.finish(39);case 43:return e.finish(36);case 44:this.gameInstances=this.gameInstances.concat(u.gameInstances);case 45:n=!0,e.next=15;break;case 48:e.next=54;break;case 50:e.prev=50,e.t1=e.catch(13),r=!0,o=e.t1;case 54:e.prev=54,e.prev=55,n||null==s.return||s.return();case 57:if(e.prev=57,!r){e.next=60;break}throw o;case 60:return e.finish(57);case 61:return e.finish(54);case 62:e.next=67;break;case 64:throw e.prev=64,e.t2=e.catch(0),new Error("failed to retrieve list of games ("+e.t2+")");case 67:case"end":return e.stop()}},e,this,[[0,64],[13,50,54,62],[28,32,36,44],[37,,39,43],[55,,57,61]])}));return function(){return e.apply(this,arguments)}}()},{key:"_getGameInstance",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,o=this.gameInstances[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;if(s.gameID===e)return s}}catch(i){a=!0,n=i}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}}},{key:"_getGameComponents",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,o=this.gameComponents[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;if(s.game.name===e)return s}}catch(i){a=!0,n=i}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}}},{key:"_findPlayer",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,o=this.gameInstances[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;if(s.players.some(function(t){return t.name===e}))return s}}catch(i){a=!0,n=i}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}}},{key:"join",value:function(){var e=Object(m.a)(l.a.mark(function e(t,a,n){var r,o,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=this._findPlayer(this.playerName))){e.next=4;break}throw new Error("player has already joined "+r.gameID);case 4:if(r=this._getGameInstance(a)){e.next=7;break}throw new Error("game instance "+a+" not found");case 7:return e.next=9,fetch(this._baseUrl()+"/"+t+"/"+a+"/join",{method:"POST",body:JSON.stringify({playerID:n,playerName:this.playerName}),headers:{"Content-Type":"application/json"}});case 9:if(200===(o=e.sent).status){e.next=12;break}throw new Error("HTTP status "+o.status);case 12:return e.next=14,o.json();case 14:s=e.sent,r.players[Number.parseInt(n)].name=this.playerName,this.playerCredentials=s.playerCredentials,e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(0),new Error("failed to join room "+a+" ("+e.t0+")");case 22:case"end":return e.stop()}},e,this,[[0,19]])}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"leave",value:function(){var e=Object(m.a)(l.a.mark(function e(t,a){var n,r,o,s,i,c,m,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._getGameInstance(a)){e.next=4;break}throw new Error("game instance not found");case 4:r=!0,o=!1,s=void 0,e.prev=7,i=n.players[Symbol.iterator]();case 9:if(r=(c=i.next()).done){e.next=23;break}if((m=c.value).name!==this.playerName){e.next=20;break}return e.next=14,fetch(this._baseUrl()+"/"+t+"/"+a+"/leave",{method:"POST",body:JSON.stringify({playerID:m.id,playerCredentials:this.playerCredentials}),headers:{"Content-Type":"application/json"}});case 14:if(200===(u=e.sent).status){e.next=17;break}throw new Error("HTTP status "+u.status);case 17:return delete m.name,delete this.playerCredentials,e.abrupt("return");case 20:r=!0,e.next=9;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(7),o=!0,s=e.t0;case 29:e.prev=29,e.prev=30,r||null==i.return||i.return();case 32:if(e.prev=32,!o){e.next=35;break}throw s;case 35:return e.finish(32);case 36:return e.finish(29);case 37:throw new Error("player not found in room");case 40:throw e.prev=40,e.t1=e.catch(0),new Error("failed to leave room "+a+" ("+e.t1+")");case 43:case"end":return e.stop()}},e,this,[[0,40],[7,25,29,37],[30,,32,36]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(m.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._findPlayer(this.playerName))){e.next=4;break}return e.next=4,this.leave(t.gameName,t.gameID);case 4:this.gameInstances=[],this.playerName="Visitor";case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(m.a)(l.a.mark(function e(t,a){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._getGameComponents(t)){e.next=4;break}throw new Error("game not found");case 4:if(!(a<n.game.minPlayers||a>n.game.maxPlayers)){e.next=6;break}throw new Error("invalid number of players "+a);case 6:return e.next=8,fetch(this._baseUrl()+"/"+t+"/create",{method:"POST",body:JSON.stringify({numPlayers:a}),headers:{"Content-Type":"application/json"}});case 8:if(200===(r=e.sent).status){e.next=11;break}throw new Error("HTTP status "+r.status);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),new Error("failed to create room for "+t+" ("+e.t0+")");case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t,a){return e.apply(this,arguments)}}()}]),e}();var E=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={playerName:a.props.playerName,nameErrorMsg:""},a.onClickEnter=function(){""!==a.state.playerName&&a.props.onEnter(a.state.playerName)},a.onKeyPress=function(e){"Enter"===e.key&&a.onClickEnter()},a.onChangePlayerName=function(e){var t=e.target.value.trim();a.setState({playerName:t,nameErrorMsg:t.length>0?"":"empty player name"})},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{className:"phase-title"},"Choose a player name:"),r.a.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),r.a.createElement("span",{className:"buttons"},r.a.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),r.a.createElement("br",null),r.a.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,r.a.createElement("br",null)))}}]),t}(r.a.Component);E.defaultProps={playerName:""};var k=E,C=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(o))))._createSeat=function(e){return e.name||"[free]"},a._createInstanceButtons=function(e){var t=e.players.find(function(e){return e.name===a.props.playerName}),n=e.players.find(function(e){return!e.name});return t&&n?r.a.createElement("button",{onClick:function(){return a.props.onClickLeave(e.gameName,e.gameID)}},"Leave"):n?r.a.createElement("button",{onClick:function(){return a.props.onClickJoin(e.gameName,e.gameID,""+n.id)}},"Join"):t?r.a.createElement("button",{onClick:function(){return a.props.onClickPlay(e.gameName,{gameID:e.gameID,playerID:""+t.id,numPlayers:e.players.length})}},"Play"):r.a.createElement("button",{onClick:function(){return a.props.onClickPlay(e.gameName,{gameID:e.gameID,numPlayers:e.players.length})}},"Spectate")},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.gameInstance,t="OPEN";return e.players.find(function(e){return!e.name})||(t="RUNNING"),r.a.createElement("tr",{key:"line-"+e.gameID},r.a.createElement("td",{key:"cell-name-"+e.gameID},e.gameName),r.a.createElement("td",{key:"cell-status-"+e.gameID},t),r.a.createElement("td",{key:"cell-seats-"+e.gameID},e.players.map(this._createSeat).join(", ")),r.a.createElement("td",{key:"cell-buttons-"+e.gameID},this._createInstanceButtons(e)))}}]),t}(r.a.Component),x=a(42),N=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(o)))).state={selectedGame:0,numPlayers:2},a._createGameNameOption=function(e,t){return r.a.createElement("option",{key:"name-option-"+t,value:t},e.game.name)},a._createNumPlayersOption=function(e){return r.a.createElement("option",{key:"num-option-"+e,value:e},e)},a._createNumPlayersRange=function(e){return e.minPlayers||(e.minPlayers=1),e.maxPlayers||(e.maxPlayers=4),console.assert(e.maxPlayers>=e.minPlayers),Object(x.a)(new Array(e.maxPlayers+1).keys()).slice(e.minPlayers)},a.onChangeNumPlayers=function(e){a.setState({numPlayers:Number.parseInt(e.target.value)})},a.onChangeSelectedGame=function(e){var t=Number.parseInt(e.target.value);a.setState({selectedGame:t,numPlayers:a._createNumPlayersRange(a.props.games[t].game)[0]})},a.onClickCreate=function(){a.props.createGame(a.props.games[a.state.selectedGame].game.name,a.state.numPlayers)},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("select",{value:this.state.selectedGame,onChange:function(t){return e.onChangeSelectedGame(t)}},this.props.games.map(this._createGameNameOption)),r.a.createElement("span",null,"Players:"),r.a.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(this._createNumPlayersOption)),r.a.createElement("span",{className:"buttons"},r.a.createElement("button",{onClick:this.onClickCreate},"Create")))}}]),t}(r.a.Component),w={ENTER:"enter",PLAY:"play",LIST:"list"},I=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(y.a)(t).call(this,e))).state={phase:w.ENTER,playerName:"Visitor",runningGame:null,errorMsg:"",credentialStore:{}},a._createConnection=function(e){var t,n=a.state.playerName;a.connection=(t={server:e.lobbyServer,gameComponents:e.gameComponents,playerName:n,playerCredentials:a.state.credentialStore[n]},new b(t))},a._updateCredentials=function(e,t){a.setState(function(a){var n=Object.assign({},a.credentialStore);return n[[e]]=t,{credentialStore:n}})},a._updateConnection=Object(m.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.connection.refresh();case 2:a.forceUpdate();case 3:case"end":return e.stop()}},e,this)})),a._enterLobby=function(e){a.setState({playerName:e,phase:w.LIST})},a._exitLobby=Object(m.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.connection.disconnect();case 2:a.setState({phase:w.ENTER,errorMsg:""});case 3:case"end":return e.stop()}},e,this)})),a._createRoom=function(){var e=Object(m.a)(l.a.mark(function e(t,n){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.connection.create(t,n);case 3:return e.next=5,a.connection.refresh();case 5:a.setState({}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a.setState({errorMsg:e.t0.message});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}(),a._joinRoom=function(){var e=Object(m.a)(l.a.mark(function e(t,n,r){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.connection.join(t,n,r);case 3:return e.next=5,a.connection.refresh();case 5:a._updateCredentials(a.connection.playerName,a.connection.playerCredentials),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a.setState({errorMsg:e.t0.message});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,a,n){return e.apply(this,arguments)}}(),a._leaveRoom=function(){var e=Object(m.a)(l.a.mark(function e(t,n){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.connection.leave(t,n);case 3:return e.next=5,a.connection.refresh();case 5:a._updateCredentials(a.connection.playerName,a.connection.playerCredentials),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a.setState({errorMsg:e.t0.message});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}(),a._startGame=function(e,t){var n=a.connection._getGameComponents(e);if(n){var r=null;t.numPlayers>1&&(r=!a.props.gameServer||{server:a.props.gameServer});var o={app:a.props.clientFactory({game:n.game,board:n.board,debug:a.props.debug,multiplayer:r}),gameID:t.gameID,playerID:t.numPlayers>1?t.playerID:null,credentials:a.connection.playerCredentials};a.setState({phase:w.PLAY,runningGame:o})}else a.setState({errorMsg:"game "+e+" not supported"})},a._exitRoom=function(){a.setState({phase:w.LIST,runningGame:null})},a._getPhaseVisibility=function(e){return a.state.phase!==e?"hidden":"phase"},a.renderRooms=function(e,t){return e.map(function(e){var n=e.gameID,o=e.gameName,s=e.players;return r.a.createElement(C,{key:"instance-"+n,gameInstance:{gameID:n,gameName:o,players:Object.values(s)},playerName:t,onClickJoin:a._joinRoom,onClickLeave:a._leaveRoom,onClickPlay:a._startGame})})},a._createConnection(a.props),a._updateConnection(),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=v.a.load("lobbyState")||{};e.phase&&e.phase===w.PLAY&&(e.phase=w.LIST),this.setState({phase:e.phase||w.ENTER,playerName:e.playerName||"Visitor",credentialStore:e.credentialStore||{}})}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.playerName,n=this.state.credentialStore[a];if(t.phase!==this.state.phase||t.credentialStore[a]!==n||t.playerName!==a){this._createConnection(this.props),this._updateConnection();var r={phase:this.state.phase,playerName:a,credentialStore:this.state.credentialStore};v.a.save("lobbyState",r,{path:"/"})}}},{key:"render",value:function(){var e=this.props,t=e.gameComponents,a=e.renderer,n=this.state,o=n.errorMsg,s=n.playerName,i=n.phase,c=n.runningGame;return a?a({errorMsg:o,gameComponents:t,gameInstances:this.connection.gameInstances,phase:i,playerName:s,runningGame:c,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateRoom:this._createRoom,handleJoinRoom:this._joinRoom,handleLeaveRoom:this._leaveRoom,handleExitRoom:this._exitRoom,handleStartGame:this._startGame}):r.a.createElement("div",{id:"lobby-view",style:{padding:50}},r.a.createElement("div",{className:this._getPhaseVisibility(w.ENTER)},r.a.createElement(k,{key:s,playerName:s,onEnter:this._enterLobby})),r.a.createElement("div",{className:this._getPhaseVisibility(w.LIST)},r.a.createElement("p",null,"Welcome, ",s),r.a.createElement("div",{className:"phase-title",id:"game-creation"},r.a.createElement("span",null,"Create a room:"),r.a.createElement(N,{games:t,createGame:this._createRoom})),r.a.createElement("p",{className:"phase-title"},"Join a room:"),r.a.createElement("div",{id:"instances"},r.a.createElement("table",null,r.a.createElement("tbody",null,this.renderRooms(this.connection.gameInstances,s))),r.a.createElement("span",{className:"error-msg"},o,r.a.createElement("br",null))),r.a.createElement("p",{className:"phase-title"},"Rooms that become empty are automatically deleted.")),r.a.createElement("div",{className:this._getPhaseVisibility(w.PLAY)},c&&r.a.createElement(c.app,{gameID:c.gameID,playerID:c.playerID,credentials:c.credentials}),r.a.createElement("div",{className:"buttons",id:"game-exit"},r.a.createElement("button",{onClick:this._exitRoom},"Exit game"))),r.a.createElement("div",{className:"buttons",id:"lobby-exit"},r.a.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}]),t}(r.a.Component);I.defaultProps={debug:!1,clientFactory:g.Client};var P=I,S=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(e){a.isActive(e)&&(a.props.moves.clickCell(e),a.props.events.endTurn())},a.isActive=function(e){return!!a.props.isActive&&null===a.props.G.cells[e]},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t="";this.props.ctx.gameover&&(t=void 0!==this.props.ctx.gameover.winner?r.a.createElement("div",{id:"winner"},"Winner: ",this.props.ctx.gameover.winner):r.a.createElement("div",{id:"winner"},"Draw!"));for(var a={border:"1px solid #555",width:"50px",height:"50px",lineHeight:"50px",textAlign:"center"},n=[],o=0;o<3;o++){for(var s=[],i=function(t){var n=3*o+t;s.push(r.a.createElement("td",{style:a,key:n,onClick:function(){return e.onClick(n)}},e.props.G.cells[n]))},c=0;c<3;c++)i(c);n.push(r.a.createElement("tr",{key:o},s))}return r.a.createElement("div",null,r.a.createElement("table",{id:"board"},r.a.createElement("tbody",null,n)),t)}}]),t}(r.a.Component),j=function(e,t){return e.find(function(e){return e.name===t})},O=function(e){return e.find(function(e){return!e.name})},_=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).handleJoinClick=function(){var e=a.props,t=e.roomId,n=e.players;a.props.onJoin(t,O(n).id)},a.handleLeaveClick=function(){a.props.onLeave(a.props.roomId)},a.handlePlayClick=function(){var e=a.props,t=e.roomId,n=e.players,r=e.playerName;a.props.onPlay(t,"".concat(j(n,r).id),n.length)},a.handleSpectateClick=function(){var e=a.props,t=e.roomId,n=e.players;a.props.onSpectate(t,n.length)},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.gameName,a=e.playerName,n=e.players,o=e.roomId,s=j(n,a),i=O(n);return r.a.createElement("div",null,r.a.createElement("span",{style:{paddingRight:"30px"}},t),n.map(function(e){return r.a.createElement("span",{key:"game-".concat(o,"-player-").concat(e.id),style:{padding:"10px"}},e.name?e.name:"free")}),s&&r.a.createElement("button",{onClick:this.handleLeaveClick},"Leave"),i&&!s&&r.a.createElement("button",{onClick:this.handleJoinClick},"Join"),!i&&s&&r.a.createElement("button",{onClick:this.handlePlayClick},"Play"),!i&&!s&&r.a.createElement("button",{onClick:this.handleSpectateClick},"Spectate"))}}]),t}(n.Component),R=function(e){return e.gameComponents[0].game.name},L=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(y.a)(t).call(this,e))).handlePlayerNameChange=function(e){var t=e.target.value;a.setState({changingPlayerName:t})},a.handleEnterClick=function(){a.props.onEnterLobby(a.state.changingPlayerName)},a.handleExitClick=function(){a.props.onExitLobby()},a.handleCreateRoomClick=function(){a.props.onCreateRoom(R(a.props),2)},a.handleJoinRoomClick=function(e,t){a.props.onJoinRoom(R(a.props),e,t)},a.handleLeaveRoomClick=function(e){a.props.onLeaveRoom(R(a.props),e)},a.handlePlayClick=function(e,t,n){a.props.onStartGame(R(a.props),{gameID:e,playerID:t,numPlayers:n})},a.handleSpectateClick=function(e,t){a.props.onStartGame(R(a.props),{gameID:e,numPlayers:t})},a.handleExitRoomClick=function(){a.props.onExitRoom()},a.state={changingPlayerName:e.playerName},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state.changingPlayerName,a=this.props,n=a.errorMsg,o=a.phase,s=a.playerName,i=a.gameInstances,c=a.gameComponents,l=a.runningGame,m=R(this.props);return n?r.a.createElement("div",{style:{color:"red"}},"Error: ",n):o===w.ENTER?r.a.createElement("div",null,"Enter your name:",r.a.createElement("input",{value:t,onChange:this.handlePlayerNameChange}),r.a.createElement("button",{onClick:this.handleEnterClick},"Login")):o===w.LIST?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("b",null,"Hello, ",s)),r.a.createElement("div",null,1===c.length&&r.a.createElement("button",{style:{color:"red"},onClick:this.handleCreateRoomClick},"Create new room for ",c[0].game.name)),r.a.createElement("div",null,0===i.length?r.a.createElement("i",null,"There are no rooms"):i.map(function(t){return r.a.createElement(_,{key:"game-".concat(t.gameID),gameName:m,roomId:t.gameID,players:t.players,playerName:s,onJoin:e.handleJoinRoomClick,onLeave:e.handleLeaveRoomClick,onPlay:e.handlePlayClick,onSpectate:e.handleSpectateClick})})),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.handleExitClick},"Logout"))):o===w.PLAY?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("button",{onClick:this.handleExitRoomClick},"Exit game")),l&&r.a.createElement(l.app,{gameID:l.gameID,playerID:l.playerID,credentials:l.credentials})):"Internal error..."}}]),t}(n.Component);i.Game.minPlayers=i.Game.maxPlayers=2;var G=function(){return r.a.createElement(P,{gameServer:"https://server-tic-tac-toe.herokuapp.com",lobbyServer:"https://server-tic-tac-toe.herokuapp.com",gameComponents:[{game:i.Game,board:S}],renderer:function(e){var t=e.errorMsg,a=e.gameComponents,n=e.gameInstances,o=e.phase,s=e.playerName,i=e.runningGame,c=e.handleEnterLobby,l=e.handleExitLobby,m=e.handleCreateRoom,u=e.handleJoinRoom,p=e.handleLeaveRoom,h=e.handleExitRoom,y=e.handleStartGame;return r.a.createElement(L,{errorMsg:t,gameComponents:a,gameInstances:n,phase:o,playerName:s,runningGame:i,onEnterLobby:c,onExitLobby:l,onCreateRoom:m,onJoinRoom:u,onLeaveRoom:p,onExitRoom:h,onStartGame:y})}})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,2,1]]]);
//# sourceMappingURL=main.4e612cd5.chunk.js.map